<template>
  <div class="card content-box">
    <span class="text"> ç³»ç»Ÿæ—¥å¿—ï¼ˆå¾…å®Œå–„ï¼‰ ğŸ“ğŸ‡ğŸˆğŸ‰</span>
  </div>
</template>

<script setup lang="ts" name="systemLog">
import { useWebSocket } from "@/utils/websocket";
import { onMounted, onUnmounted } from "vue";

const { init, close, send } = useWebSocket("ws://127.0.0.1:18765", "running_logger");

onMounted(() => {
  init();
});

onUnmounted(() => {
  close();
  // å–æ¶ˆè®¢é˜…ä¸»é¢˜
  send(JSON.stringify({ action: "unsubscribe", topic: "running_logger", message: "ok" }));
});
</script>
